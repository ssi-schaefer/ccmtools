/*
 * This file was automatically generated by %(CcmToolsVersion)s
 * <http://ccmtools.sourceforge.net>
 * DO NOT EDIT!
 */

#ifndef __%(Identifier)s__CCM__H__
#define __%(Identifier)s__CCM__H__

#ifdef HAVE_CONFIG_H
#  include <config.h>
#endif 

#ifdef HAVE_MICO 

#include <WX/Utils/smartptr.h>
#include <WX/Utils/debug.h> 
#include <CCM/CCMContainer.h>

#include <%(StubsIncludeNamespace)s%(Identifier)s.h>

%(MSupportsDefInclude)s
%(MProvidesDefInclude)s
%(MUsesDefInclude)s

#include <%(LocalIncludeNamespace)s%(Identifier)s_gen.h> 
#include <%(LocalIncludeNamespace)s%(Identifier)s_share.h> 

%(OpenNamespace)s

//============================================================================
// Component remote adapter 
//============================================================================
class %(Identifier)s_impl :
    virtual public POA_%(CorbaStubName)s,
    virtual public PortableServer::RefCountServantBase
{
    friend class CCM_%(Identifier)s_Context_impl;

  protected:
    WX::Utils::SmartPtr<%(LocalNamespace)s%(Identifier)s> local_adapter;
    WX::Utils::SmartPtr<CCM::SessionContainer> ccm_container;

%(MProvidesDefAdapterVariable)s
%(MUsesDefAdapterVariable)s

  public:
    %(Identifier)s_impl(WX::Utils::SmartPtr<%(LocalNamespace)s%(Identifier)s>, 
        WX::Utils::SmartPtr<CCM::SessionContainer> );
    virtual ~%(Identifier)s_impl ();

    // Component Attributes
%(MAttributeDefEqInterfaceHeader)s

    // Supported Interfaces
%(MSupportsDefEqInterfaceHeader)s

    // Equivalent interface methods handling facets
%(MProvidesDefEqInterfaceHeader)s

    // Equivalent interface methods handling receptacles
%(MUsesDefEqInterfaceHeader)s
%(MUsesDefGetAdapterHeader)s

    // Inherited Navigation interface
    CORBA::Object_ptr provide_facet(const char *);

    // Inherited Receptacles interface
    Components::Cookie* connect(const char*, CORBA::Object_ptr);
    void disconnect(const char* name, Components::Cookie*);

    // Inherited CCMObject interface
    Components::CCMHome_ptr get_ccm_home();
    void configuration_complete();
    void remove();

    // Overload default implementation
    CORBA::Object_ptr _get_component();
};

%(CloseNamespace)s

#endif // HAVE_MICO
#endif


<<<<<<<SPLIT>>>>>>>
/*
 * This file was automatically generated by %(CcmToolsVersion)s
 * <http://ccmtools.sourceforge.net>
 * DO NOT EDIT!
 */

#ifdef HAVE_CONFIG_H
#  include <config.h>
#endif 

#ifdef HAVE_MICO  

#include <CCM_Remote/PrimitiveConverter.h>
#include "%(Identifier)s_remote.h"

using namespace std;
using namespace WX::Utils;
using namespace CCM;

%(OpenNamespace)s

//============================================================================
// Component remote adapter 
//============================================================================

%(Identifier)s_impl::%(Identifier)s_impl(SmartPtr<%(LocalNamespace)s%(Identifier)s> la, 
    SmartPtr<CCM::SessionContainer> c)
    : local_adapter(la), ccm_container (c)
{
    LDEBUGNL(CCM_REMOTE, "+%(Identifier)s_impl::%(Identifier)s_impl()");

%(MProvidesDefAdapterVariableInit)s
}

%(Identifier)s_impl::~%(Identifier)s_impl ()
{
    LDEBUGNL(CCM_REMOTE, "-%(Identifier)s_impl::~%(Identifier)s_impl()");
    // Smart pointer local_adapter goes out of scope 
    // local_context is deleted by the local component
}


/*
 * Component Attributes
 */

%(MAttributeDefEqInterfaceImpl)s


/*
 * Supported Interfaces
 */

%(MSupportsDefEqInterfaceImpl)s


/*
 * Equivalent interface methods handling facets
 */

%(MProvidesDefEqInterfaceImpl)s


/*
 * Equivalent interface methods handling receptacles
 */

%(MUsesDefEqInterfaceImpl)s


/*
 * Inherited Navigation interface
 */

CORBA::Object_ptr
%(Identifier)s_impl::provide_facet(const char* name)
{
    LDEBUGNL(CCM_REMOTE, " %(Identifier)s_impl::provide_facet()");

%(MProvidesDefNavigationFacet)s
    throw Components::InvalidName();
    return CORBA::Object::_nil ();
}


/*
 * Inherited Receptacles interface
 */

Components::Cookie*
%(Identifier)s_impl::connect(const char* name, CORBA::Object_ptr ref)
{
    LDEBUGNL(CCM_REMOTE, " %(Identifier)s_impl::connect()");
%(MUsesDefReceptacleConnect)s
    throw Components::InvalidName();
    return new CCM::Cookie_impl;
}

void
%(Identifier)s_impl::disconnect(const char* name, Components::Cookie* _ck)
{
    LDEBUGNL(CCM_REMOTE, " %(Identifier)s_impl::disconnect()");
%(MUsesDefReceptacleDisconnect)s
    throw Components::InvalidName();
}


/*
 * Inherited CCMObject interface
 */

Components::CCMHome_ptr
%(Identifier)s_impl::get_ccm_home()
{
    LDEBUGNL(CCM_REMOTE, " %(Identifier)s_impl::get_ccm_home()");
    return ccm_container->get_reference_for_home();
}

void
%(Identifier)s_impl::configuration_complete()
{
    LDEBUGNL(CCM_REMOTE, " %(Identifier)s_impl::configuration_complete()");
    ccm_container->configuration_complete (this); 
    local_adapter->configuration_complete();
}

void
%(Identifier)s_impl::remove()
{
    LDEBUGNL(CCM_REMOTE, " %(Identifier)s_impl::remove()");
    local_adapter->remove();
    Components::CCMHome_var myhome = get_ccm_home ();
    Components::CCMObject_var myself = ccm_container->get_reference_for_component (this);
    myhome->remove_component (myself);
}


/*
 * Overload default implementation
 */

CORBA::Object_ptr
%(Identifier)s_impl::_get_component()
{
    LDEBUGNL(CCM_REMOTE, " %(Identifier)s_impl::_get_component()");
    return ccm_container->get_reference_for_component (this);
}

%(CloseNamespace)s

#endif // HAVE_MICO


