void
%(ComponentType)s::connect_%(Identifier)s(SmartPtr<%(UsesType)s> f)
  	throw(Components::AlreadyConnected, Components::InvalidConnection)
{
  	LDEBUGNL(CCM_CONTAINER," %(ComponentType)s::connect_%(Identifier)s()");
  	if(!ValidConnection) 
  		throw Components::InvalidConnection();
  	if(%(Identifier)s_receptacle) 
  		throw Components::AlreadyConnected();
  	%(Identifier)s_receptacle = 
    	SmartPtr<%(CCMUsesType)s>(dynamic_cast<%(CCMUsesType)s*>(f.ptr()));
}

SmartPtr<%(UsesType)s>
%(ComponentType)s::disconnect_%(Identifier)s()
  	throw(Components::NoConnection)
{
  	LDEBUGNL(CCM_CONTAINER," %(ComponentType)s::disconnect_%(Identifier)s()" );
  	if(!ValidConnection) throw 
  		Components::InvalidConnection();
  	if(!%(Identifier)s_receptacle) 
  		throw Components::NoConnection();
  	SmartPtr<%(UsesType)s> f = %(Identifier)s_receptacle;
  	%(Identifier)s_receptacle = SmartPtr<%(CCMUsesType)s>();
  	return f;
}

SmartPtr<%(UsesType)s>
%(ComponentType)s::get_connection_%(Identifier)s()
	throw(Components::NoConnection)
{
  	LDEBUGNL(CCM_CONTAINER," %(ComponentType)s::get_connection_%(Identifier)s()");
  	if(!ValidConnection) 
  		throw Components::InvalidConnection();
  	if(%(Identifier)s_receptacle == SmartPtr<%(CCMUsesType)s>())
    	throw Components::NoConnection();
  	return %(Identifier)s_receptacle;
}


