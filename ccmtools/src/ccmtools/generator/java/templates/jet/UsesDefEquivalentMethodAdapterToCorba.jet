<%@ jet package="ccmtools.generator.java.templates" 
	    class="UsesDefEquivalentMethodAdapterToCorbaTemplate" 
		imports="ccmtools.generator.java.metamodel.* "	    
%>
<% UsesDef uses = (UsesDef) argument;  %>

    public void connect_<%=uses.getIdentifier()%>(<%=uses.getInterface().generateAbsoluteJavaName()%> localObject)
        throws AlreadyConnected, InvalidConnection
    {
        logger.fine("localInterface = " + localObject);
        // Create CORBA objects and connect them to the remote component
		try
		{
			if(<%=uses.getIdentifier()%> == null) 
			{
				<%=uses.getIdentifier()%> = localObject;
				org.omg.CORBA.Object remoteObject = 
					componentPoa.servant_to_reference(
					    new <%=uses.getInterface().generateAbsoluteJavaRemoteName()%>AdapterFromCorba(localObject));
				remoteInterface.connect_<%=uses.getIdentifier()%>(<%=uses.getInterface().generateAbsoluteIdlName()%>Helper.narrow(remoteObject));
			}
			else
			{
				throw new AlreadyConnected();
			}
		}
		catch (org.omg.PortableServer.POAPackage.ServantNotActive e)
		{
			throw new InvalidConnection();
		}
		catch (org.omg.PortableServer.POAPackage.WrongPolicy e)
		{
			throw new InvalidConnection();
		}
		catch (Components.AlreadyConnected e)
		{
			throw new AlreadyConnected();
		}
		catch (Components.InvalidConnection e)
		{
			throw new InvalidConnection();
		}
    }

    public <%=uses.getInterface().generateAbsoluteJavaName()%> disconnect_<%=uses.getIdentifier()%>()
        throws NoConnection
    {
        logger.fine("");
   		try
		{
			if(<%=uses.getIdentifier()%> != null)
			{
				remoteInterface.disconnect_<%=uses.getIdentifier()%>();
				return <%=uses.getIdentifier()%>;
			}
			else 
			{
				throw new NoConnection();
			}
		}
		catch (java.lang.Exception e)
		{
			throw new NoConnection();
		}
    
    }
       
    public <%=uses.getInterface().generateAbsoluteJavaName()%> get_connection_<%=uses.getIdentifier()%>()
    {
        logger.fine("");
        return <%=uses.getIdentifier()%>;
    }
