#!/bin/sh

if [ -z "$JAVA_HOME" ]; then
	echo "ERROR!"
	echo "Environment variable JAVA_HOME not found!" 
	exit 1
fi

if [ -z "$CCMTOOLS_HOME" ]; then
	echo "ERROR!"
	echo "Environment variable CCMTOOLS_HOME not found!" 
	exit 1
fi

JAVA_LAUNCHER="$JAVA_HOME/bin/java"
if [ -x $JAVA_LAUNCHER ]; then 
	if [ "`uname`" = "Interix" ]; then
		export CLASSPATH="$CCMTOOLS_HOME/lib/commons-cli-1.0.jar;$CCMTOOLS_HOME/lib/ccmtools.jar;$CLASSPATH"
	else
		export CLASSPATH="$CCMTOOLS_HOME/lib/commons-cli-1.0.jar:$CCMTOOLS_HOME/lib/ccmtools.jar:$CLASSPATH"
	fi
	exec "$JAVA_HOME/bin/java" -Dccmtools.home="$CCMTOOLS_HOME" -Djava.util.logging.config.file="$CCMTOOLS_HOME/etc/logging.properties" ccmtools.generator.confix.Main $@  
else
	echo "ERROR!"
	echo "Java executable not found in" "$JAVA_HOME/bin"
	exit 1
fi
