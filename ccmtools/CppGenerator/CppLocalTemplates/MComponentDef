/*
 * This file was automatically generated by the CCM Tools - DO NOT EDIT !
 * <http://ccmtools.sourceforge.net/>
 */

//==============================================================================
// %(Identifier)s - component logic
//==============================================================================

#ifndef __COMPONENT_%(PreprocIdentifier)s_GEN__H__
#define __COMPONENT_%(PreprocIdentifier)s_GEN__H__

#include <string>
#include <map>
#include <WX/Utils/smartptr.h>
#include <LocalComponents/CCM.h>

#include <%(SelfInclude)s_share.h>
#include <%(HomeInclude)s_share.h>

%(MAttributeDefInclude)s
%(MConstantDefInclude)s
%(MSupportsDefInclude)s
%(MProvidesDefInclude)s
%(MConsumesDefInclude)s
%(MEmitsDefInclude)s
%(MPublishesDefInclude)s
%(MUsesDefInclude)s
%(BaseInclude)s

%(OpenNamespace)s

class %(HomeType)s;
class CCM_%(HomeType)s;
class CCM_%(Identifier)s_Context;

//==============================================================================
// %(Identifier)s local component adapter class
//==============================================================================

class %(Identifier)s
  : virtual public LocalComponents::CCMObject 
   %(MSupportsDefBase)s
   %(BaseType)s 	
{
 protected:
  %(HomeType)s* home_local_adapter;
  CCM_%(Identifier)s* local_component;
  CCM_%(Identifier)s_Context* context;
  bool ValidConnection;

%(MProvidesDefAdapterVariable)s
%(MUsesDefAdapterVariable)s

 public:
  %(Identifier)s();
  %(Identifier)s ( %(HomeType)s* h, CCM_%(Identifier)s* lc );
  virtual ~%(Identifier)s (  );

%(MAttributeDefPrototype)s
%(MProvidesDefProvidePrototype)s
%(MUsesDefConnectPrototype)s
%(MUsesDefGetConnectionPrototype)s
%(MSupportsDefAdapterPrototype)s

  // Navigation functions
  WX::Utils::SmartPtr<LocalComponents::Object> provide_facet ( const std::string& name )
    throw ( LocalComponents::InvalidName );
  LocalComponents::FacetDescriptions get_all_facets (  );
  LocalComponents::FacetDescriptions get_named_facets ( const LocalComponents::NameList& names )
    throw ( LocalComponents::InvalidName );
  bool same_component ( const LocalComponents::Object& obj );

  // Receptacle functions
  LocalComponents::Cookie connect ( const LocalComponents::FeatureName& name, WX::Utils::SmartPtr<LocalComponents::Object> connection )
    throw ( LocalComponents::InvalidName, LocalComponents::InvalidConnection,
            LocalComponents::AlreadyConnected, LocalComponents::ExceededConnectionLimit );
  void disconnect ( const LocalComponents::FeatureName& name, const LocalComponents::Cookie& ck )
    throw ( LocalComponents::InvalidName, LocalComponents::InvalidConnection,
            LocalComponents::CookieRequired, LocalComponents::NoConnection );
  LocalComponents::ConnectionDescriptions get_connections ( const LocalComponents::FeatureName& name )
    throw ( LocalComponents::InvalidName );
  LocalComponents::ReceptacleDescriptions get_all_receptacles (  );
  LocalComponents::ReceptacleDescriptions get_named_receptacles ( const LocalComponents::NameList& names )
    throw ( LocalComponents::InvalidName );

  // CCMObject functions
  LocalComponents::IRObject* get_component_def (  );
  LocalComponents::HomeExecutorBase* get_ccm_home (  );
  LocalComponents::PrimaryKeyBase* get_primary_key (  )
    throw ( LocalComponents::NoKeyAvailable );
  void configuration_complete (  )
    throw ( LocalComponents::InvalidConfiguration );
  void remove (  )
    throw ( LocalComponents::RemoveFailure );
  LocalComponents::ComponentPortDescription get_all_ports (  );
};


//==============================================================================
// context adapter class
//==============================================================================

class CCM_%(Identifier)s_Context_impl
  : public CCM_%(Identifier)s_Context
{
 private:
  %(Identifier)s* component_local_adapter;

 public:
  CCM_%(Identifier)s_Context_impl ( %(Identifier)s* c );
  virtual ~CCM_%(Identifier)s_Context_impl (  );

%(MUsesDefGetCtxConnectionPrototype)s

  // CCMContext functions
  LocalComponents::Principal* get_caller_principal (  );
  LocalComponents::HomeExecutorBase* get_CCM_home (  );
  bool get_rollback_only (  )
    throw ( LocalComponents::IllegalState );
  LocalTransaction::UserTransaction* get_user_transaction (  )
    throw ( LocalComponents::IllegalState );
  bool is_caller_in_role ( const std::string& role );
  void set_rollback_only (  )
    throw ( LocalComponents::IllegalState );
  LocalComponents::Object* get_CCM_object (  )
    throw ( LocalComponents::IllegalState );
};

%(MProvidesDefAdapterClass)s

%(CloseNamespace)s

#endif


<<<<<<<SPLIT>>>>>>>
/*
 * This file was automatically generated by the CCM Tools - DO NOT EDIT !
 * <http://ccmtools.sourceforge.net/>
 */

//==============================================================================
// %(Identifier)s - component logic implementation
//==============================================================================

#include <cassert>
#include <iostream>
#include <sstream>
#include <WX/Utils/debug.h>

#ifdef HAVE_CONFIG_H
#include <config.h>
#endif

#include "%(Identifier)s_gen.h"

using namespace std;
using namespace WX::Utils;
using namespace CCM_Local;

%(OpenNamespace)s

%(MProvidesDefAdapterClassImpl)s

//==============================================================================
// context adapter class implementation
//==============================================================================

CCM_%(Identifier)s_Context_impl::CCM_%(Identifier)s_Context_impl ( %(Identifier)s* c )
  : component_local_adapter ( c )
{
  assert ( c );  // precondition: c != NULL
  DEBUGNL ( "+CCM_%(Identifier)s_Context_impl->CCM_%(Identifier)s_Context_impl (  )" );
}

CCM_%(Identifier)s_Context_impl::~CCM_%(Identifier)s_Context_impl (  )
{
  DEBUGNL ( "-CCM_%(Identifier)s_Context_impl->~CCM_%(Identifier)s_Context_impl (  )" );
}

%(MUsesDefGetConnectionCtxImplDefinition)s
LocalComponents::Principal*
CCM_%(Identifier)s_Context_impl::get_caller_principal (  )
{
  DEBUGNL ( " CCM_%(Identifier)s_Context_impl->get_caller_principal (  )" );
  // TODO
  throw LocalComponents::NotImplemented (  );
}

LocalComponents::HomeExecutorBase*
CCM_%(Identifier)s_Context_impl::get_CCM_home (  )
{
  DEBUGNL ( " CCM_%(Identifier)s_Context_impl->get_CCM_home (  )" );
  // TODO
  throw LocalComponents::NotImplemented (  );
}

bool
CCM_%(Identifier)s_Context_impl::get_rollback_only (  )
  throw ( LocalComponents::IllegalState )
{
  DEBUGNL ( " CCM_%(Identifier)s_Context_impl->get_rollback_only (  )" );
  // TODO
  throw LocalComponents::NotImplemented (  );
}

LocalTransaction::UserTransaction*
CCM_%(Identifier)s_Context_impl::get_user_transaction (  )
  throw ( LocalComponents::IllegalState )
{
  DEBUGNL ( " CCM_%(Identifier)s_Context_impl->get_user_transaction (  )" );
  // TODO
  throw LocalComponents::NotImplemented (  );
}

bool
CCM_%(Identifier)s_Context_impl::is_caller_in_role ( const std::string& role )
{
  DEBUGNL ( " CCM_%(Identifier)s_Context_impl->is_caller_in_role (  )" );
  // TODO
  throw LocalComponents::NotImplemented (  );
}

void
CCM_%(Identifier)s_Context_impl::set_rollback_only (  )
  throw ( LocalComponents::IllegalState )
{
  DEBUGNL ( " CCM_%(Identifier)s_Context_impl->set_rollback_only (  )" );
  // TODO
  throw LocalComponents::NotImplemented (  );
}

LocalComponents::Object*
CCM_%(Identifier)s_Context_impl::get_CCM_object (  )
  throw ( LocalComponents::IllegalState )
{
  DEBUGNL ( " CCM_%(Identifier)s_Context_impl->get_CCM_object (  )" );
  // TODO
  throw LocalComponents::NotImplemented (  );
}


//==============================================================================
// local component adapter implementation
//==============================================================================

%(Identifier)s::%(Identifier)s()
{
  home_local_adapter = NULL;
  local_component = NULL;
  context = NULL;
  ValidConnection = false;
%(MProvidesDefAdapterVariableInitDefault)s
%(MUsesDefAdapterVariableInitDefault)s
}

%(Identifier)s::%(Identifier)s ( %(HomeType)s* h, CCM_%(Identifier)s* lc )
  : home_local_adapter ( h ), local_component ( lc )
{
  DEBUGNL ( "+%(Identifier)s->%(Identifier)s (  )" );
  context = new CCM_%(Identifier)s_Context_impl ( this );
  ValidConnection = true;
%(MProvidesDefAdapterVariableInit)s
%(MUsesDefAdapterVariableInit)s
}

%(Identifier)s::~%(Identifier)s (  )
{
  DEBUGNL ( "-%(Identifier)s->~%(Identifier)s (  )" );
  delete context;
  delete local_component;
}

%(MAttributeDefAdapterDefinition)s
%(MProvidesDefAdapterDefinition)s
%(MUsesDefAdapterDefinition)s
%(MSupportsDefAdapterImplDefinition)s

// Navigation functions

WX::Utils::SmartPtr<LocalComponents::Object>
%(Identifier)s::provide_facet ( const std::string& name )
  throw ( LocalComponents::InvalidName )
{
  DEBUGNL ( " %(Identifier)s->provide_facet ( " << name << " )" );
%(MProvidesDefProvideFacet)s
  throw LocalComponents::InvalidName ( name );
}

LocalComponents::FacetDescriptions
%(Identifier)s::get_all_facets (  )
{
  DEBUGNL ( " %(Identifier)s->get_all_facets (  )" );
  // TODO
  throw LocalComponents::NotImplemented (  );
}

LocalComponents::FacetDescriptions
%(Identifier)s::get_named_facets ( const LocalComponents::NameList& names )
  throw ( LocalComponents::InvalidName )
{
  DEBUGNL ( " %(Identifier)s->get_named_facets (  )" );
  // TODO
  throw LocalComponents::NotImplemented (  );
}

bool
%(Identifier)s::same_component ( const LocalComponents::Object& obj )
{
  DEBUGNL ( " %(Identifier)s->same_component (  )" );
  // TODO
  throw LocalComponents::NotImplemented (  );
}

// Receptacle functions

LocalComponents::Cookie
%(Identifier)s::connect ( const LocalComponents::FeatureName& name, WX::Utils::SmartPtr<LocalComponents::Object> connection )
  throw ( LocalComponents::InvalidName, LocalComponents::InvalidConnection,
	  LocalComponents::AlreadyConnected, LocalComponents::ExceededConnectionLimit )
{
  DEBUGNL ( " %(Identifier)s->connect ( " << name << " )" );

%(MUsesDefConnectFacet)s
  throw LocalComponents::InvalidName ( name );
}

void
%(Identifier)s::disconnect ( const LocalComponents::FeatureName& name, const LocalComponents::Cookie& ck )
  throw ( LocalComponents::InvalidName, LocalComponents::InvalidConnection,
          LocalComponents::CookieRequired, LocalComponents::NoConnection )
{
  DEBUGNL ( " %(Identifier)s->disconnect ( " << name << " )" );
  if ( ! ValidConnection ) throw LocalComponents::InvalidConnection (  );

%(MUsesDefDisconnectFacet)s
  throw LocalComponents::InvalidName ( name );
}

LocalComponents::ConnectionDescriptions
%(Identifier)s::get_connections ( const LocalComponents::FeatureName& name )
  throw ( LocalComponents::InvalidName )
{
  DEBUGNL ( " %(Identifier)s->get_connections ( " << name << " )" );
  // TODO
  throw LocalComponents::NotImplemented (  );
}

LocalComponents::ReceptacleDescriptions
%(Identifier)s::get_all_receptacles (  )
{
  DEBUGNL ( " %(Identifier)s->get_all_receptacles (  )" );
  // TODO
  throw LocalComponents::NotImplemented (  );
}

LocalComponents::ReceptacleDescriptions
%(Identifier)s::get_named_receptacles ( const LocalComponents::NameList& names )
  throw ( LocalComponents::InvalidName )
{
  DEBUGNL ( " %(Identifier)s->get_named_receptacles (  )" );
  // TODO
  throw LocalComponents::NotImplemented (  );
}

// CCMObject functions

LocalComponents::IRObject*
%(Identifier)s::get_component_def (  )
{
  DEBUGNL ( " %(Identifier)s->get_component_def (  )" );
  // TODO
  throw LocalComponents::NotImplemented (  );
}

LocalComponents::HomeExecutorBase*
%(Identifier)s::get_ccm_home (  )
{
  DEBUGNL ( " %(Identifier)s->get_ccm_home (  )" );
  // TODO
  throw LocalComponents::NotImplemented (  );
}

LocalComponents::PrimaryKeyBase*
%(Identifier)s::get_primary_key (  )
  throw ( LocalComponents::NoKeyAvailable )
{
  DEBUGNL ( " %(Identifier)s->get_primary_key (  )" );
  // TODO
  throw LocalComponents::NotImplemented (  );
}

void
%(Identifier)s::configuration_complete (  )
  throw ( LocalComponents::InvalidConfiguration )
{
  DEBUGNL ( " %(Identifier)s->configuration_complete (  )" );
  if ( ! ValidConnection ) throw LocalComponents::InvalidConnection (  );
  local_component->set_session_context ( context );
  local_component->ccm_activate (  );
}

void
%(Identifier)s::remove (  )
  throw ( LocalComponents::RemoveFailure )
{
  DEBUGNL ( " %(Identifier)s->remove (  )" );
  if ( ! ValidConnection ) throw LocalComponents::InvalidConnection (  );
  ValidConnection = false;
%(MProvidesDefImplRemove)s
  local_component->ccm_remove (  );
}

LocalComponents::ComponentPortDescription
%(Identifier)s::get_all_ports (  )
{
  DEBUGNL ( " %(Identifier)s->get_all_ports (  )" );
  // TODO
  throw LocalComponents::NotImplemented (  );
}

%(CloseNamespace)s


<<<<<<<SPLIT>>>>>>>
//==============================================================================
// %(Identifier)s - shared class definitions
//==============================================================================

#ifndef __COMPONENT_%(PreprocIdentifier)s_SHARE__H__
#define __COMPONENT_%(PreprocIdentifier)s_SHARE__H__

#include <map>
#include <WX/Utils/smartptr.h>
#include <LocalComponents/CCM.h>

%(MAttributeDefInclude)s
%(MConstantDefInclude)s
%(MSupportsDefInclude)s
%(MProvidesDefInclude)s
%(MConsumesDefInclude)s
%(MEmitsDefInclude)s
%(MPublishesDefInclude)s
%(BaseInclude)s
%(MUsesDefInclude)s

%(OpenNamespace)s

//==============================================================================
// Component class
//==============================================================================

class CCM_%(Identifier)s
: public LocalComponents::SessionComponent%(BaseType)s%(MSupportsDefBase)s
{
 public:
%(MAttributeDefPrototypeVV)s
%(MProvidesDefGetFacetPrototypeVV)s
%(MSupportsDefImplPrototypeVV)s
};


//==============================================================================
// Context class
//==============================================================================

%(MUsesDefConnectionMap)s

class CCM_%(Identifier)s_Context
  : public LocalComponents::SessionContext
{
 public:
%(MUsesDefGetConnectionPrototypeVV)s
};


%(CloseNamespace)s

#endif


<<<<<<<SPLIT>>>>>>>
/***
 * %(Identifier)s component business logic definition.
 * 
 * // TODO: WRITE YOUR DESCRIPTION HERE! 
 *
 * @author
 * @version 
 *
 * This file structure was automatically generated by CCM Tools
 * <http://ccmtools.sourceforge.net/> and defines a component's
 * implementation classes. 
 ***/

#ifndef __COMPONENT_%(PreprocIdentifier)s_IMPL__H__
#define __COMPONENT_%(PreprocIdentifier)s_IMPL__H__

#include <%(SelfInclude)s_share.h>

%(OpenNamespace)s

/**
 * %(Identifier)s component class 
 *
 * // TODO: WRITE YOUR DESCRIPTION HERE! 
 *
 * @author
 * @version 
 *
 * This class implements a component's equivalent and supported interfaces
 * as well as component attributes. Additionally, session component callback 
 * methods must be implemented.  
 **/
class CCM_%(Identifier)s_impl
  : virtual public CCM_%(Identifier)s%(BaseType)s
{
 private:
%(MAttributeDefVariable)s

 public:
  CCM_%(Identifier)s_Context* ctx;

  CCM_%(Identifier)s_impl (  );
  virtual ~CCM_%(Identifier)s_impl (  );

%(MAttributeDefPrototype)s
%(MProvidesDefGetFacetPrototype)s
%(MSupportsDefImplPrototype)s

  // Callback methods

  virtual void set_session_context ( LocalComponents::SessionContext* ctx )
    throw ( LocalComponents::CCMException );
  virtual void ccm_activate (  )
    throw ( LocalComponents::CCMException );
  virtual void ccm_passivate (  )
    throw ( LocalComponents::CCMException );
  virtual void ccm_remove (  )
    throw ( LocalComponents::CCMException );
};

//(MProvidesDefAdapterImplClass)s

%(CloseNamespace)s

#endif


<<<<<<<SPLIT>>>>>>>
/***
 * %(Identifier)s component business logic implementation.
 * 
 * // TODO: WRITE YOUR DESCRIPTION HERE! 
 *
 * @author
 * @version 
 *
 * This file structure was automatically generated by CCM Tools
 * <http://ccmtools.sourceforge.net/> and contains a component's
 * implementation classes. 
 ***/

#include <cassert>
#include <iostream>
#include <WX/Utils/debug.h>

#include "%(Identifier)s_impl.h"
%(MProvidesDefImplInclude)s

using namespace std;
using namespace WX::Utils;
using namespace CCM_Local;

%(OpenNamespace)s

//==============================================================================
// CCM_%(Identifier)s - component implementation
//==============================================================================

CCM_%(Identifier)s_impl::CCM_%(Identifier)s_impl (  )
{
  DEBUGNL ( "+CCM_%(Identifier)s_impl->CCM_%(Identifier)s_impl (  )" );
}

CCM_%(Identifier)s_impl::~CCM_%(Identifier)s_impl (  )
{
  DEBUGNL ( "-CCM_%(Identifier)s_impl->~CCM_%(Identifier)s_impl (  )" );
}

%(MAttributeDefImplDefinition)s
%(MSupportsDefImplDefinition)s

void
CCM_%(Identifier)s_impl::set_session_context ( LocalComponents::SessionContext* context )
  throw ( LocalComponents::CCMException )
{
  DEBUGNL ( " CCM_%(Identifier)s_impl->set_session_context (  )" );
  ctx = dynamic_cast<CCM_%(Identifier)s_Context*> ( context );
}

void
CCM_%(Identifier)s_impl::ccm_activate (  )
  throw ( LocalComponents::CCMException )
{
  DEBUGNL ( " CCM_%(Identifier)s_impl->ccm_activate (  )" );
}

void
CCM_%(Identifier)s_impl::ccm_passivate (  )
  throw ( LocalComponents::CCMException )
{
  DEBUGNL ( " CCM_%(Identifier)s_impl->ccm_passivate (  )" );
}

void
CCM_%(Identifier)s_impl::ccm_remove (  )
  throw ( LocalComponents::CCMException )
{
  DEBUGNL ( " CCM_%(Identifier)s_impl->ccm_remove (  )" );
}

%(MProvidesDefGetFacetDefinition)s

//(MProvidesDefAdapterImplClassImpl)s
%(CloseNamespace)s



