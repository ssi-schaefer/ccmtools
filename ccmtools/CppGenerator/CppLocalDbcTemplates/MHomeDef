/*
 * This file was automatically generated by CCM Tools
 * (http://ccmtools.sourceforge.net)
 * DO NOT EDIT!
 */

//==============================================================================
// %(Identifier)s - home class and support classes
//==============================================================================

#ifndef __%(Identifier)s__DBC__H__
#define __%(Identifier)s__DBC__H__

#include <string>
#include <map>
#include <WX/Utils/smartptr.h>
#include <LocalComponents/CCM.h>
#include <CCM_OCL/OclException.h>

#include "%(Identifier)s_gen.h"
#include "%(ComponentType)s_gen.h" 
#include "%(ComponentType)s_dbc.h" 

%(OpenNamespace)s


//==============================================================================
// home DbC adapter classes
//==============================================================================

class DbC_%(Identifier)s
  : public %(Identifier)s
{
 public:
  DbC_%(Identifier)s();
  virtual ~DbC_%(Identifier)s();

  virtual WX::Utils::SmartPtr<%(ComponentType)s> create()
    throw (LocalComponents::CreateFailure);

%(MFactoryDefAdapterPrototype)s

 private:
 	void DbC_check_invariant(const char* DbC_FUNCTION_NAME, bool) throw(CCM_OCL::OclException);
};

%(CloseNamespace)s

//==============================================================================
// entry point
//==============================================================================

extern "C" {
  WX::Utils::SmartPtr<LocalComponents::CCMHome> DbC_create_%(Identifier)sAdapter();
  int DbC_deploy_%(Identifier)s(char* name);
  int DbC_undeploy_%(Identifier)s(char* name);	
}

#endif


<<<<<<<SPLIT>>>>>>>
/*
 * This file was automatically generated by CCM Tools
 * (http://ccmtools.sourceforge.net)
 * DO NOT EDIT!
 */

//==============================================================================
// %(Identifier)s - home class component logic implementation
//==============================================================================

#include <iostream>
#include <WX/Utils/debug.h>
#include <CCM_Local/HomeFinder.h>
#include <CCM_OCL/OclHelpers.h>

#include "%(Identifier)s_dbc.h"
#include <%(Identifier)s_entry.h>

using namespace std;
using namespace WX::Utils;
using namespace CCM_Local;
using namespace CCM_OCL;

%(OpenNamespace)s

//==============================================================================
// home adapter implementation
//==============================================================================

#define __LOCAL__ADAPTER__NAME__ %(Identifier)s

DbC_%(Identifier)s::DbC_%(Identifier)s() /*throw(CCM_OCL::OclException)*/
{
  static const char* DbC_FUNCTION_NAME = "DbC_%(Identifier)s::DbC_%(Identifier)s()";
  DEBUGNL("+DbC_%(Identifier)s->DbC_%(Identifier)s()");
  local_home = dynamic_cast<CCM_%(Identifier)s*> ( create_%(Identifier)s());
  DbC_check_invariant(DbC_FUNCTION_NAME,true);
}

DbC_%(Identifier)s::~DbC_%(Identifier)s (  )
{
  DEBUGNL("-DbC_%(Identifier)s->~DbC_%(Identifier)s()");
}

void DbC_%(Identifier)s::DbC_check_invariant(const char* DbC_FUNCTION_NAME, bool DbC_onExit) throw(CCM_OCL::OclException)
{
%(InvariantInvocation)s
}

SmartPtr<%(ComponentType)s>
DbC_%(Identifier)s::create()
  throw ( LocalComponents::CreateFailure )
{
  DEBUGNL(" DbC_%(Identifier)s->create()");
  SmartPtr<%(ComponentType)s> ret(dynamic_cast<%(ComponentType)s*>(
      new DbC_%(ComponentType)s(this, 
	dynamic_cast<CCM_%(ComponentType)s*>(local_home->create()))));
  return ret;
}

%(MFactoryDefAdapterDefinition)s

%(CloseNamespace)s

#undef __LOCAL__ADAPTER__NAME__

//==============================================================================
// entry point
//==============================================================================

extern "C" {
  WX::Utils::SmartPtr<LocalComponents::CCMHome>
  DbC_create_%(Identifier)sAdapter()
  {
    DEBUGNL ( " DbC_create_%(Identifier)sAdapter()" );
    WX::Utils::SmartPtr<LocalComponents::CCMHome> ret (new %(Namespace)s::DbC_%(Identifier)s());
    return ret;
  }


  int DbC_deploy_%(Identifier)s(char* name)
  {
    DEBUGNL ( " dbc_deploy_%(Identifier)s()" );
    try {
      WX::Utils::SmartPtr<LocalComponents::CCMHome> ret( new %(Namespace)s::DbC_%(Identifier)s());
      HomeFinder::Instance()->register_home(ret, name);
    } catch ( ... )  {
      return -1;
    }
    return 0; 
  }	


  int DbC_undeploy_%(Identifier)s(char* name)
  {
     try {
       HomeFinder::Instance()->unregister_home(name);	
     } catch (...) {
       return -1;
     }
     return 0;
  }
}





