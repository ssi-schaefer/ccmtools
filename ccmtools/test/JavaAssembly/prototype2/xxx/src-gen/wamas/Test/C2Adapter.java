/*
 * This file was automatically generated by CCM Tools version 0.9.0
 * <http://ccmtools.sourceforge.net>
 * DO NOT EDIT!
 */

package wamas.Test;

import java.util.logging.Logger;

import Components.AlreadyConnected;
import Components.Assembly;
import Components.CCMException;     
import Components.CCMHome;
import Components.Cookie;
import Components.CookieImpl;
import Components.CookieRequired;
import Components.ExceededConnectionLimit;
import Components.InvalidConfiguration;
import Components.InvalidConnection;
import Components.InvalidName;
import Components.NoConnection;
import Components.RemoveFailure;
import ccmtools.local.ServiceLocator;

  
                 
public class C2Adapter 
    implements C2
{
    private Logger logger = ServiceLocator.instance().getLogger();
    
    private CCM_C2 localInterface;
    private CCM_C2_Context ctx;
    private Assembly assembly;

    /** Facet adapter references */
    private wamas.Test.I2 i2FacetAdapter;  
	
    /** Receptacle references */
    private wamas.Test.I3 i3Receptacle = null;  
		
		
    protected C2Adapter()
    {
        this(null, null);
    }
	
    public C2Adapter(CCM_C2 localInterface)
    {
        this(localInterface, null);
    }
	
    public C2Adapter(CCM_C2 localInterface, Assembly assembly)
    {
        logger.fine("localInterface = " + localInterface + ", " + assembly);
        this.localInterface = localInterface;
        this.assembly = assembly;
    }
	
	
    /* 
     * Supported interface methods 
     */

    /** Supported interface attributes */    
    
    
    /** Supported interface methods */    

	
    /* 
     * Equivalent interface methods 
     */
	
    /** Attribute equivalent methods */

    public int b()
        throws CCMException
    {
        int result = localInterface.b();
        logger.fine("result = " + result);
        return result;
    }
     
    public void b(int value)
        throws CCMException
    {
        logger.fine("value = " + value);
        localInterface.b(value);
    } 
    

    /** Facet equivalent methods */    

    public wamas.Test.I2 provide_i2()
    {
        logger.fine("");
        if(i2FacetAdapter == null)
        {
            i2FacetAdapter = 
                new wamas.Test.I2Adapter(localInterface.get_i2());
        }
        return i2FacetAdapter;
    }
    
    
    /** Receptacle equivalent methods */

    public void connect_i3(wamas.Test.I3 localObj)
        throws AlreadyConnected, 
               InvalidConnection
    {
        logger.fine("obj = " + localObj);
        if(i3Receptacle != null)
        {
            throw new AlreadyConnected();
        }	
        else
        {
            i3Receptacle = localObj;
        }
    }

    public wamas.Test.I3 disconnect_i3()
        throws NoConnection
    {
        logger.fine("");
        if(i3Receptacle == null)
        {
            throw new NoConnection();
        }
        else
        {
            wamas.Test.I3 f = i3Receptacle;
            i3Receptacle = null;
            return f;
        }
    }
        
    public wamas.Test.I3 get_connection_i3()
    {
        logger.fine("");
        return i3Receptacle;
    }

	
    /** CCMObject interface methods */
	
    public void configuration_complete()
        throws InvalidConfiguration
    {
        logger.fine("");
        ctx = new CCM_C2_ContextImpl(this); 
        try
        {
            if(assembly != null) 
            { 
                assembly.configuration_complete(); 
            }
            localInterface.set_session_context(ctx);
            localInterface.ccm_activate();
        }
        catch(CCMException e)
        {
            throw new InvalidConfiguration();
        }
    }

    public void remove()
        throws RemoveFailure
    { 
        logger.fine("");
        try 
        {
            localInterface.ccm_remove();
            if(assembly != null) 
            { 
                assembly.tear_down(); 
                assembly = null;
            }
        }
        catch(CCMException e)
        {
            throw new RemoveFailure();
        }
    }
    
    public CCMHome get_ccm_home()
    {
        throw new RuntimeException("Not implemented!");
    }
    
    
    /** Navigation interface methods */
    
    public Object provide_facet(String name)
        throws InvalidName
    {
        logger.fine("name = " + name);
        if(name == null)
        {
            throw new InvalidName();
        }
        else if(name.equals("i2"))
        {
            return provide_i2();
        }
   
        throw new InvalidName();
    }
    
    
    /** Receptacle methods */
    
    public Cookie connect(String name, Object obj)
        throws InvalidName, InvalidConnection, 
        AlreadyConnected, ExceededConnectionLimit
    {
        logger.fine("name = " + name + ", obj = " + obj);
        if(name == null)
        {
            throw new InvalidName();
        }
        if(obj == null)
        {
            throw new InvalidConnection();
        }         
        else if(name.equals("i3"))
        {
            connect_i3((wamas.Test.I3) obj);
            return new CookieImpl();
        }
     
        else
        {
            throw new InvalidName();
        }
    }
    
    public void disconnect(String name, Cookie ck)
        throws InvalidName, InvalidConnection, 
        CookieRequired, NoConnection
    {
        logger.fine("name = " + name + ", ck = " + ck );
        if(name == null)
        {
            throw new InvalidName();
        }
        if(ck == null)
        {
            throw new CookieRequired();
        }      
        else if(name.equals("i3"))
        {
            disconnect_i3();
        }
     
        else
        {
            throw new InvalidName();
        }
    }    
}
